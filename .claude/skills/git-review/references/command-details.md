# gh CLI コマンド詳細

このドキュメントは、git-reviewスキルで使用するgh CLIコマンドの詳細情報を提供します。

## PR情報取得

```bash
gh pr view <PR番号> --json number,title,state,author,url,comments,reviews
```

## レビューコメント詳細取得

### プルリクエストのすべてのレビューコメント
```bash
gh api repos/{owner}/{repo}/pulls/{PR番号}/comments
```

### 特定のレビューコメント
```bash
gh api repos/{owner}/{repo}/pulls/comments/{comment_id}
```

### レビュー全体の情報
```bash
gh api repos/{owner}/{repo}/pulls/{PR番号}/reviews
```

## 出力例（JSON）

```json
{
  "comments": [
    {
      "id": 123456,
      "user": {
        "login": "github-advanced-security[bot]"
      },
      "body": "コミットメッセージに機密情報が含まれていないか確認してください。",
      "path": ".claude/skills/git-commit-push/SKILL.md",
      "line": 45,
      "created_at": "2025-01-15T10:30:00Z"
    }
  ]
}
```

## コメント分類ロジック

### レビュアーの種類
- **GitHub Codex**: `chatgpt-codex-connector[bot]`
- **Claude Code**: `claude`
- **人間のレビュアー**: 上記以外のユーザー

### 優先度判定

#### コード行コメント
- **P1バッジ付き**: `![P1 Badge]` が含まれる場合
- **P0バッジ付き**: `![P0 Badge]` が含まれる場合
- その他: コメント内容から判定

#### PR全体コメント内の指摘事項
- **必須**: `### 1. **重大**:` または `### 1. 🔴` で始まる
- **推奨**: `### 2. **中**:` または `### 2. 🟡` で始まる
- **軽微**: `### 3. **軽微**:` または `### 3. 🟢` で始まる

### PR全体コメントの指摘事項抽出ロジック

1. **セクションタイトルの検出**:
   - パターン: `### \d+\. \*\*.*?\*\*:` または `### \d+\. 🔴|🟡|🟢`
   - 例: `### 1. **重大**: デバッグログレベルの修正`

2. **詳細情報の抽出**:
   - **問題箇所**: `**問題箇所:**` または `**ファイル:**` の後の内容
   - **問題内容**: `**問題点:**` または `**問題内容:**` の後の内容
   - **推奨修正**: `**推奨修正:**` または `**推奨対応:**` の後の内容

3. **優先度の判定**:
   - セクションタイトルに含まれる優先度キーワード
   - レビュアーが明示的に指定した優先度バッジ
