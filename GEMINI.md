# bf-copyのGEMINI解析

## プロジェクト概要

このプロジェクトは、Electronで構築された「BF Camera File Copy Application」というデスクトップアプリケーションです。主な目的は、「Sigma BF」という特定のカメラがコンピュータに接続されたことを自動的に検出し、そこから写真や動画ファイルをユーザーが指定したローカルディレクトリにコピーすることです。

このアプリケーションは、バックグラウンドで動作するように設計されており、ユーザーとの対話はシステムトレイのアイコンを通じて行われます。写真と動画でそれぞれ異なる保存先フォルダを設定でき、アプリケーション設定やOSとの自動起動を管理する機能も含まれています。

## 主な機能

*   **カメラ自動検出:** 接続された「Sigma BF」カメラを定期的にスキャンします。
*   **ファイル選択コピー:** 写真と動画ファイルを、ユーザーが定義した異なる保存先フォルダにコピーします。
*   **設定管理:** ユーザーが希望の保存先フォルダを設定し、保存することができます。
*   **ログイン時の自動起動:** ユーザーがOSにログインした際に、自動的に起動するように設定できます。
*   **システムトレイ統合:** システムトレイで動作し、邪魔にならないバックグラウンド操作を実現します。
*   **ユーザーフレンドリーなインターフェース:** 初期設定、監視、ファイルコピーの開始を簡単に行えるシンプルなインターフェースを提供します。
*   **シングルインスタンス制御:** アプリケーションの多重起動を防止します。

## 開発ガイドライン

*   **言語:** コメントやドキュメントは日本語、コード（変数名、関数名など）は英語で記述します。
*   **テスト駆動開発 (TDD):** Red-Green-Refactorサイクルを厳守し、テストを先行して作成します。
*   **コミットメッセージ:** 日本語または英語（プロジェクトの慣習に従う）で記述します。

## 技術スタック

*   **フレームワーク:** Electron
*   **ランタイム:** Node.js
*   **フロントエンド:** HTML/CSS/JavaScript
*   **テスティング:** Jest

## セットアップと実行

1.  **依存関係のインストール:**
    ```bash
    npm install
    ```
2.  **開発モードでの実行:**
    ```bash
    npm run dev
    # または `npm start`
    ```
3.  **テストの実行:**
    ```bash
    npm test
    ```

## ビルドと配布

### ポータブル版ビルド (Windows)

WSL環境からも実行可能なコマンドです。
```bash
./build-and-run.sh
```
これにより、`dist/win-unpacked` ディレクトリにポータブル版の `BF Copy.exe` が生成されます。

### インストーラー作成 (Windows)

Windows環境（PowerShellなど）で以下のコマンドを実行します。
```powershell
npm run build-win
```
これにより、`dist` ディレクトリに `BF Copy Setup 1.0.0.exe` というインストーラーが作成されます。

**注意:** コード署名はされていないため、インストール時にWindows Defender SmartScreenの警告が表示される場合がありますが、「詳細情報」→「実行」でインストールを続行できます。

## 考えられる改善点

*   **エラーハンドリング:** コピー操作中にカメラが切断された場合や、ディスク容量が不足している場合など、より多くのエッジケースに対応したエラーハンドリングを実装する。
*   **UI/UXの向上:** ファイル転送中の進捗表示をより詳細にしたり、設定画面をより直感的にするなど、ユーザー体験を向上させる。
*   **テストカバレッジの拡大:** 特にUIインタラクションや、実際のファイルシステム操作を伴うE2E（エンドツーエンド）テストを拡充する。
*   **コードのモジュール性向上:** `main.js` に集中しているロジックを、機能ごと（例: カメラ監視、ファイルコピー、UI管理など）にファイルを分割し、見通しを良くする。
*   **クロスプラットフォームの互換性:** macOS向けのビルド設定は存在しますが、macOS特有の問題（例: ファイルパスの扱い、アクセス権限など）について、より詳細なテストと対応を行う。
